# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
url --url=http://thinfra01.mdx.med/install/centos-6.5-x86_64/
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --mtu=1500 --bootproto dhcp
rootpw  --iscrypted $6$3NKfyUQOsO2Q2KOR$xR6TnuaKtx8sghjnAWgOsv.aHrLt0gIU5R6Ezx6OF4h7/sR99XE5ZIuY3fnYc0Zpasj5MGaMCh6Usm9g7zaxE/
# Reboot after installation
reboot
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone --utc America/New_York
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --all
#ignoredisk --only-use=sda
#volgroup root_vg --pesize=32768 pv.008002
#logvol /data --fstype=ext4 --name=data_lv --vgname=root_vg --grow --size=1
#logvol / --fstype=ext4 --name=root_lv --vgname=root_vg --size=5120
#logvol swap --name=swap_lv --vgname=root_vg --size=4096

#part /boot --fstype=ext4 --asprimary --size=512
#part pv.008002 --grow --asprimary --size=512


repo --name="CentOS"  --baseurl=http://thinfra01.mdx.med/install/centos-6.5-x86_64/ --cost=100

%packages --nobase
@Core
-bridge-utils
-cryptsetup-luks
-cryptsetup-luks-libs
-device-mapper-multipath
-device-mapper-multipath-libs
-fuse
-iscsi-initiator-utils
-libaio
-mdadm
-xfsprogs

%end

%post

cat /proc/cmdline > /tmp/foobar
yum -y update
rpm --install http://repo.mdx.med/yum/mdx-centos-6.3-x86_64/cfengine-community-3.3.4-1.x86_64.rpm
/var/cfengine/bin/cf-agent -v -B -s 10.0.0.28 > /var/log/cf-agent-install.log 2>&1
/var/cfengine/bin/cf-agent -v -f failsafe.cf -D post_install >> /var/log/cf-agent-install.log 2>&1
/var/cfengine/bin/cf-agent -v -D post_install >> /var/log/cf-agent-install.log 2>&1

%end
